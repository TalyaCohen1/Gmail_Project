/* src/styles/SideBar.css */

/* Existing .sidebar styles */
.sidebar {
    width: 280px; /* Default open width */
    background-color: var(--background-primary); /* Use theme variable */
    border-right: 1px solid var(--border-color); /* Use theme variable */
    box-shadow: none;
    padding: 24px 16px; /* Adjust padding for visual consistency when open */
    min-height: 100vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
    position: fixed; /* Keep sidebar fixed on the left */
    top: 64px; /* Below the header */
    left: 0; /* Align to the left edge */
    transition: width 0.3s ease-in-out, padding 0.3s ease-in-out, align-items 0.3s ease-in-out; /* Smooth transitions */
    flex-shrink: 0; /* Prevent sidebar from shrinking when content grows */
    color: var(--text-primary); /* Ensure text color changes with theme */
    z-index: 99; /* Ensure sidebar is below header but above other content if necessary */
}

/* Styles for when the sidebar is closed */
.sidebar--closed {
    width: 70px; /* Width when closed, just enough for icons */
    padding: 24px 8px; /* Reduced horizontal padding */
    align-items: center; /* Center items horizontally when collapsed */
    overflow-x: hidden; /* Hide horizontal overflow */
}

/* Hide text in sidebar items when closed */
.sidebar--closed .sidebar-item span,
.sidebar--closed h1, /* Hide the main sidebar title */
.sidebar--closed .label-manager-header h3, /* Hide LabelManager header text */
.sidebar--closed .label-manager-header button:not(.add-label-button), /* Hide buttons in LabelManager header except add */
.sidebar--closed .compose-button-text { /* Hide compose button text */
    display: none;
}

/* Adjust compose button when sidebar is closed */
.sidebar--closed .compose-button {
    width: 50px; /* Make it circular */
    height: 50px; /* Make it circular */
    border-radius: 50%; /* Make it circular */
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.sidebar--closed .compose-button .compose-icon {
    margin-right: 0; /* Remove margin when closed */
}

/* Hide the arrow icon for categories when sidebar is closed */
.sidebar--closed .category-toggle-icon {
    display: none;
}

/* Styles for individual sidebar items (Inbox, Starred, etc.) */
.sidebar-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 8px 16px;
    border-radius: 24px; /* Pill shape */
    text-decoration: none;
    color: var(--text-primary); /* Use theme variable */
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.sidebar-item:hover {
    background-color: var(--hover-background); /* Use theme variable */
}

.sidebar-item.active {
    background-color: #fdf9db; /* Google Blue background for active */
    color: #e2ba35; /* Google Blue text for active */
    font-weight: 500;
}

body.dark .sidebar-item.active {
  background-color: #c69b0d; /* Darker blue for active in dark mode */
  color: #efcc5a; /* Lighter blue text for active in dark mode */
}


.sidebar-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
    flex-shrink: 0; /* Prevent icon from shrinking */
    filter: var(--icon-filter); /* If you use SVG directly, you might need a filter for dark mode */
}

.sidebar-section {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 8px;
}

/* Ensure buttons with sidebar-item class match link styles */
button.sidebar-item {
    background: none;
    border: none;
    color: inherit;
    padding: 8px 16px;
    font-size: 16px;
    cursor: pointer;
    text-align: left; /* Align text to left when open */
}

/* Adjust text alignment for buttons when closed */
.sidebar--closed button.sidebar-item {
    text-align: center; /* Center text/icons when closed */
}

/* Compose button specific styles */
.compose-button {
    background-color: var(--compose-button-background); /* Use theme variable */
    color: var(--compose-button-text); /* Use theme variable */
    padding: 15px 15px 15px 15px;
    border-radius: 16px;
    box-shadow: 0 1px 2px 0 rgba(60,64,67,0.30), 0 1px 3px 1px rgba(60,64,67,0.15);
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    border: none;
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
    margin-bottom: 16px;
    width: 130px; /* Fixed width as per Gmail */
}

.compose-button:hover {
    background-color: var(--compose-button-hover); /* Use theme variable */
    box-shadow: 0 1px 3px 0 rgba(60,64,67,0.30), 0 4px 8px 3px rgba(60,64,67,0.15);
}

.compose-icon {
    width: 20px;
    height: 20px;
    margin-right: 8px; /* Space between icon and text */
    filter: var(--icon-filter); /* If you use SVG directly, you might need a filter for dark mode */
}

/* Label Manager styles */
.label-manager {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color); /* Use theme variable */
}

.label-manager-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.label-manager-header h3 {
    font-size: 0.875rem;
    color: var(--text-secondary); /* Use theme variable */
    margin: 0;
}

.label-manager-header button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    border-radius: 50%;
    transition: background-color 0.2s ease;
    color: var(--text-secondary); /* Use theme variable */
}

.label-manager-header button:hover {
    background-color: var(--hover-background); /* Use theme variable */
}

.add-label-icon {
    width: 20px;
    height: 20px;
    filter: var(--icon-filter); /* If you use SVG directly, you might need a filter for dark mode */
}

.label-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.label-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 8px 16px;
    border-radius: 24px;
    text-decoration: none;
    color: var(--text-primary); /* Use theme variable */
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.label-item:hover {
    background-color: var(--hover-background); /* Use theme variable */
}

.label-color-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: #ccc; /* Default color, should be dynamic based on label */
    flex-shrink: 0;
}

.sidebar-item-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  margin-left: 12px;
}

.mail-count {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary); /* Use theme variable */
  background-color: var(--badge-background); /* Use theme variable */  
  padding: 0 5px;
  border-radius: 4px;
  margin-left: 8px;
}